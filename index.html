<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>آزمایشگاه مجموعه‌ها — پیش‌نمایش</title>
<style>
  :root{
    --bg1: #eaf6ff;
    --bg2: #dff0fb;
    --card: #ffffff;
    --accent: #0b63b6;
    --muted: #6b7280;
  }
  html,body{height:100%;margin:0;font-family:Tahoma, Arial, sans-serif;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#111}
  .center-wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:24px;box-sizing:border-box}
  .card{background:var(--card);width:100%;max-width:720px;border-radius:14px;padding:28px 26px;box-shadow:0 12px 40px rgba(11,99,182,0.08);text-align:center}
  h1{margin:0;color:var(--accent);font-size:26px}
  p.lead{margin:8px 0 18px;color:var(--muted);font-size:15px}
  /* Loader: circular + progress text */
  .loader-wrap{display:flex;align-items:center;justify-content:center;gap:18px;margin:12px 0 16px}
  .spinner{
    width:84px;height:84px;border-radius:50%;position:relative;display:inline-block;
  }
  .spinner::before{
    content:"";position:absolute;inset:0;border-radius:50%;
    border:8px solid rgba(11,99,182,0.12);border-top-color:var(--accent);
    animation:spin 1.1s linear infinite;
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  .progress{font-size:13px;color:var(--muted)}
  .enter-btn{display:inline-block;margin-top:12px;padding:10px 18px;border-radius:10px;background:var(--accent);color:#fff;text-decoration:none;font-weight:600;box-shadow:0 6px 18px rgba(11,99,182,0.12)}
  .small{color:var(--muted);font-size:13px;margin-top:10px}
  /* decorative footer */
  .footer{margin-top:14px;color:#9aa4b2;font-size:12px}
  /* responsive */
  @media (max-width:480px){ .card{padding:18px} h1{font-size:20px} .spinner{width:64px;height:64px} }
</style>
</head>
<body>
  <div class="center-wrap">
    <div class="card" role="main" aria-live="polite">
      <h1>آزمایشگاه تعاملی — مجموعه‌ها</h1>
      <p class="lead">یک محیط آموزشی برای نمایش و بررسی مجموعه‌ها — در حال آماده‌سازی محیط شبیه‌سازی...</p>

      <div class="loader-wrap" aria-hidden="false">
        <div class="spinner" aria-hidden="true"></div>
        <div style="text-align:left">
          <div class="progress" id="progressText">در حال بارگذاری: 0%</div>
          <div class="small">پس از آماده‌سازی به صفحهٔ تعریف مجموعه‌ها منتقل می‌شوید.</div>
        </div>
      </div>

      <a id="enterNow" class="enter-btn" href="sets.html">ورود فوری به آزمایشگاه</a>

      <div class="footer">اگر `sets.html` را در همان پوشه قرار نداده باشی، انتقال انجام نخواهد شد — مطمئن شو هر سه فایل در یک پوشه‌اند.</div>
    </div>
  </div>

<script>
  // نمایش درصد پیشرفتی ساده (تزئینی) قبل از انتقال
  (function(){
    const progressText = document.getElementById('progressText');
    let p = 0;
    const interval = setInterval(()=>{
      p += Math.floor(Math.random()*12)+6; // افزایش تصادفی برای حس طبیعی‌تر
      if(p >= 98){ p = 100; progressText.innerText = 'در حال بارگذاری: 100%'; clearInterval(interval); }
      else progressText.innerText = 'در حال بارگذاری: ' + p + '%';
    }, 200);

    // انتقال خودکار بعد از 2000 ms (2 ثانیه)
    setTimeout(()=>{
      // قبل از رفتن، مطمئن شو فایل هدف وجود داره (سعی به fetch محلی)
      fetch('sets.html', { method: 'HEAD' }).then(resp=>{
        if(resp && resp.ok) { window.location.href = 'sets.html'; }
        else {
          // فایل پیدا نشد: پیغام راهنما
          progressText.innerText = 'فایل sets.html پیدا نشد — لطفاً آن را در همان پوشه قرار دهید.';
          document.getElementById('enterNow').style.display = 'inline-block';
        }
      }).catch(err=>{
        // اگر fetch به دلیل file:// یا CORS مشکل داشت، باز هم تلاش برای هدایت (مرورگر محلی)
        // در بسیاری از محیط‌های محلی fetch روی file:// کار نمی‌کند؛ اجازهٔ پیش‌فرض هدایت:
        window.location.href = 'sets.html';
      });
    }, 2000);
  })();
</script>
</body>
</html>
